# 기상에 따른 산림재해 예측 - 산사태 예측기술 개발·개선

 * 2021년 날씨 빅데이터 콘테스트 황령산호랑이(백승훈, 황영산, 김경희, 공하경)팀의 프로젝트 과정을 기록한 repository 입니다
 * 기상청과 산림청이 함께한 공공협력형 분야의 기상에 따른 산림재해 예측하는 competition입니다
 * 실제 대회에 사용한 분석코드들을 참고바랍니다(모든 코드와 데이터는 올리지 못한점 양해 부탁드립니다)

## 활용데이터 정의  

### 활용데이터 개요
![image](https://user-images.githubusercontent.com/67913569/131528549-338b0d6e-8ca8-411c-9cd5-06de6f39aade.png)

### 기상데이터 상세
- AWS : 

- ASOS :  

- 해양데이터
  - BUOY : 덕적도 지점
  - 등표 : 서수도 지점  
  
- 하늘상태(sky) 데이터
  - 초단기실황 (2016-04-01 00:00 ~ 2018-10-15 01:00)
  - ASOS : 서산 지점 (2018-10-15 02:00 ~ 2019-12-31 23:00) 및 홍성 지점 (2020-01-01 00:00 ~ 2020-03-31 23:00)
    
    용어|운량|SKY(하늘상태)
    ---|---|---
    맑음|0/10 ~ 2/10|1
    구름조금|3/10 ~ 5/10|2
    구름많음|6/10 ~ 8/10|3
    흐림|9/10 ~ 10/10|4
  
### E-R Diagram

![image](https://user-images.githubusercontent.com/58713684/88915927-1bba0e80-d2a0-11ea-869f-01c1cd4cece6.png)


## 파생변수
- 이슬점
- 실내외 온도차 (내부대기온도 - 외부대기온도)
- 내부대기 / 코일 온도차
- 데이터 시계열 특성 : MONTH
- 각 요인별 최대 / 최소

## Normalization & UnderSampling
- Normalization
  - 범주형 변수인 PLANT(공장위치), LOC(공장내부위치), MONTH(월) SKY(하늘상태)에 대해서는 **One-Hot Encoding**을 수행하였습니다.
  - 위 4개 외 수치형 변수에 대해서는 **스케줄링**을 수행하였습니다.
- UnderSampling
  - 본 데이터는 결로 발생이 전체의 0.57%인 **비대칭 데이터**이므로, 다수 클래스 데이터인 결로 미발생 데이터에서 일부만을 사용하는 언더샘플링을 수행하였습니다.
  - 재현율(Recall)이 가장 높았던 **Random Under-Sampler**를 채택하였습니다.

## Model
- Random Forest
    
- XGBoost

- LightGBM

## 중요 변수 도출
- XGBoost, LightGBM을 24시간, 48시간 각각에 대해 적용하여 Feature Importance를 도출했습니다.
- 그 결과 네 가지 경우에서 공통적으로 상위에 랭크된 변수, 즉 결로 발생에 주된 영향을 주는 것으로 나타난 변수들은 다음과 같습니다.
  - IN_COIL_TEM_D (내부대기 / 코일 온도차)
  - HUM_IN_MAX (내부습도 최댓값)
  - HUM_IN (내부습도)
  - LB_MAX_INS_WD (등표최대순간풍향)
  - LB_WD (등표풍향)


